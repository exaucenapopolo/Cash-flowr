<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MULAFLOWR - LoveEarn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <style>
        /* Styles de base et du dashboard existant */
        body {
            background: linear-gradient(135deg, #d5e8d9 0%, #c5dfe6 100%);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        body.loaded {
            visibility: visible;
            opacity: 1;
        }

        :root {
            --primary-color: #3a8ee6;
            --primary-light: #4da6ff;
            --primary-dark: #2c75c9;
            --secondary-color: #4c566a;
            --accent-color: #5e81ac;
            --background-light: #f5f7fb;
            --background-dark: #e5e9f0;
            --card-bg: #ffffff;
            --text-color: #2e3440;
            --text-light: #4c566a;
            --success-color: #4CD964;
            --warning-color: #FF9500;
            --danger-color: #FF3B30;
            --purple-color: #AF52DE;
            --teal-color: #5AC8FA;
            --orange-color: #FF9500;
            --pink-color: #FF2D55;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --badge-active: #4CD964;
            --badge-pending: #FF9500;
            --badge-inactive: #FF3B30;
        }

        .dark-mode {
            --primary-color: #5e81ac;
            --primary-light: #81a1c1;
            --primary-dark: #4c566a;
            --secondary-color: #d8dee9;
            --accent-color: #88c0d0;
            --background-light: #2e3440;
            --background-dark: #3b4252;
            --card-bg: #434c5e;
            --text-color: #eceff4;
            --text-light: #d8dee9;
            --success-color: #4CD964;
            --warning-color: #FF9500;
            --danger-color: #FF3B30;
            --purple-color: #AF52DE;
            --teal-color: #5AC8FA;
            --orange-color: #FF9500;
            --pink-color: #FF2D55;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            --badge-active: #2ecc71;
            --badge-pending: #f1c40f;
            --badge-inactive: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: var(--transition);
        }

        /* Loader */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #d5e8d9 0%, #c5dfe6 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loader-container.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(#0000 10%, var(--primary-color));
            -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 8px), #000 0);
            animation: spin 1s infinite linear;
        }

        @keyframes spin {
            to {
                transform: rotate(1turn);
            }
        }

        /* Header styles */
        .header {
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .language-selector {
            background-color: var(--primary-light);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .theme-toggle {
            background-color: transparent;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }

        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        .theme-toggle i {
            font-size: 1.2rem;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            position: relative;
        }

        .user-profile .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            border: 2px solid var(--primary-light);
            box-shadow: var(--shadow);
        }

        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            border-radius: 8px;
            padding: 10px;
            display: none;
            flex-direction: column;
            gap: 5px;
            min-width: 150px;
            z-index: 200;
            transform-origin: top right;
            animation: scaleIn 0.2s ease-out forwards;
        }

        .profile-dropdown.active {
            display: flex;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .profile-dropdown .theme-toggle {
            width: 100%;
            border-radius: 8px;
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-color);
            justify-content: flex-start;
            padding: 10px;
            transition: background-color 0.2s ease, transform 0.2s ease;
            text-align: left;
            gap: 10px;
        }

        .profile-dropdown .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .profile-dropdown .theme-toggle span {
            flex-grow: 1;
            text-align: left;
        }

        /* Styles du bouton hamburger anim√© */
        .hamburger-btn {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            padding: 0;
        }

        .hamburger-btn .bar {
            width: 100%;
            height: 3px;
            background-color: var(--secondary-color);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .hamburger-btn.open .bar:nth-child(2) {
            opacity: 0;
        }

        .hamburger-btn.open .bar:nth-child(1) {
            transform: translateY(11px) rotate(45deg);
        }

        .hamburger-btn.open .bar:nth-child(3) {
            transform: translateY(-11px) rotate(-45deg);
        }

        /* Main layout */
        .main-container {
            display: flex;
            flex: 1;
        }

        /* Styles de la Sidebar (Menu) */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow);
            height: calc(100vh - 80px);
            position: sticky;
            top: 80px;
            padding: 25px 0;
            overflow-y: auto;
            transition: transform 0.4s ease-in-out;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .welcome-section {
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .welcome-text {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .username {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .menu-category {
            padding: 15px 25px 5px;
            font-size: 0.85rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .menu-item {
            padding: 12px 25px 12px 35px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            border-left: 4px solid transparent;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.05), transparent);
            transition: all 0.5s ease;
        }
        .menu-item:hover::before {
            left: 100%;
        }

        .menu-item:hover,
        .menu-item.active {
            background-color: rgba(0, 0, 0, 0.05);
            border-left-color: var(--primary-color);
            color: var(--primary-color);
        }

        .menu-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
            transition: transform 0.3s ease;
        }

        .menu-item:hover i {
            transform: scale(1.1) rotate(5deg);
        }

        .menu-badge {
            position: absolute;
            right: 25px;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 10px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            animation: popIn 0.5s ease-out;
        }

        @keyframes popIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .menu-badge.active {
            background-color: var(--badge-active);
            color: white;
        }

        .menu-badge.inactive {
            background-color: var(--badge-inactive);
            color: white;
        }

        /* Contenu du tableau de bord */
        .content {
            flex: 1;
            padding: 30px;
        }

        .page-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--secondary-color);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-title i {
            color: var(--primary-color);
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        /* Nouveaux styles pour les formulaires LoveEarn */
        .love-earn-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .form-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-section .title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--secondary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--background-dark);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--background-light);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(58, 142, 230, 0.2);
        }

        .love-earn-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .love-earn-btn:hover {
            transform: translateY(-2px);
            background-color: var(--primary-dark);
        }

        .whatsapp-link-section {
            text-align: center;
        }

        .whatsapp-link-section .title {
            color: #25D366;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .whatsapp-link-section p {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        .whatsapp-link-btn {
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .whatsapp-link-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(37, 211, 102, 0.4);
        }

        /* Footer */
        .footer {
            background-color: var(--card-bg);
            padding: 20px 30px;
            text-align: center;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
            margin-top: auto;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            text-decoration: underline;
            color: var(--primary-dark);
        }

        .footer-text {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Notification styles */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }

        .notification {
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 350px;
            animation: slideIn 0.3s ease forwards;
            position: relative;
            overflow: hidden;
            color: white;
            pointer-events: auto;
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success-color) 0%, #2AB32A 100%);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--danger-color) 0%, #c0392b 100%);
        }

        .notification.info {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        }

        @keyframes slideIn {
            from {
                transform: translateX(110%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .sidebar {
                width: 230px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .hamburger-btn {
                display: flex;
                position: absolute;
                top: 20px;
                left: 20px;
                z-index: 101;
            }

            .sidebar {
                width: 75%;
                max-width: 300px;
                height: 100vh;
                position: fixed;
                top: 0;
                left: -100%;
                z-index: 99;
                transition: left 0.4s ease-in-out;
            }

            .sidebar.open {
                left: 0;
            }

            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 98;
            }

            .overlay.active {
                display: block;
            }

            .header {
                padding: 15px;
            }

            .logo {
                font-size: 1.5rem;
                margin-left: 50px;
            }

            .content {
                padding: 20px;
            }

            .love-earn-container {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 576px) {
            .user-name {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="loader-container" id="loader">
        <div class="loader"></div>
    </div>

    <div class="notification-container" id="notificationContainer"></div>

    <header class="header">
        <button class="hamburger-btn" id="hamburgerBtn" aria-label="Toggle menu">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </button>

        <div class="logo">
            <span>MULAFLOWR</span>
        </div>

        <div class="header-controls">
            <button class="language-selector" id="languageSelector">
                <i class="fas fa-globe"></i>
                <span>French</span>
                <i class="fas fa-chevron-down"></i>
            </button>

            <div class="user-profile" id="userProfile">
                <div class="avatar" id="userAvatar">U</div>
                <div class="profile-dropdown" id="profileDropdown">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                        <span>Mode nuit</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="overlay" id="overlay"></div>

    <div class="main-container">
        <aside class="sidebar" id="sidebar">
            <div class="welcome-section">
                <div class="welcome-text">Dashboard >> MULAFLOWR</div>
                <div class="username" id="sidebarUsername">Utilisateur</div>
            </div>

            <div class="menu-category">PRINCIPAL</div>
            <a href="dashboard.html" class="menu-item">
                <i class="fas fa-home"></i>
                <span>Tableau de bord</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="depot.html" class="menu-item">
                <i class="fas fa-wallet"></i>
                <span>D√©p√¥t üíµ</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="bonus_bienvenue.html" class="menu-item">
                <i class="fas fa-gift"></i>
                <span>Bonus de bienvenue</span>
                <span class="menu-badge badge-inactive">‚òí</span>
            </a>

            <div class="menu-category">COMPTES</div>
            <a href="retrait.html" class="menu-item">
                <i class="fas fa-money-bill-wave"></i>
                <span>Retrait</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="equipe.html" class="menu-item">
                <i class="fas fa-users"></i>
                <span>√âquipe</span>
                <span class="menu-badge badge-inactive">‚òí</span>
            </a>

            <div class="menu-category">SP√âCIAL</div>
            <a href="love_earn.html" class="menu-item active">
                <i class="fas fa-heart"></i>
                <span>LoveEarn</span>
                <span class="menu-badge badge-active">‚òë</span>
            </a>

            <a href="social_boost.html" class="menu-item">
                <i class="fas fa-rocket"></i>
                <span>SBH</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="challenge_reward.html" class="menu-item">
                <i class="fas fa-medal"></i>
                <span>Challenge and Reward</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <div class="menu-category">PRODUIT / TACHE</div>
            <a href="whatsapp_earn.html" class="menu-item">
                <i class="fab fa-whatsapp"></i>
                <span>Gagner via Whatsapp</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="movies.html" class="menu-item">
                <i class="fas fa-film"></i>
                <span>Movies</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="paris_fixes.html" class="menu-item">
                <i class="fas fa-chart-line"></i>
                <span>Paris fixes</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="gains_publicitaires.html" class="menu-item">
                <i class="fas fa-ad"></i>
                <span>Gains publicitaires</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="spin_wheel.html" class="menu-item">
                <i class="fas fa-trophy"></i>
                <span>Spin wheel üèÜ</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="tiktok_earn.html" class="menu-item">
                <i class="fab fa-tiktok"></i>
                <span>TikTok Earn</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="youtube_earn.html" class="menu-item">
                <i class="fab fa-youtube"></i>
                <span>YouTube Earn</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="instagram_earn.html" class="menu-item">
                <i class="fab fa-instagram"></i>
                <span>Instagram Earn</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="trivia_challenge.html" class="menu-item">
                <i class="fas fa-brain"></i>
                <span>TRIVIA challenge</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <div class="menu-category">BONUS</div>
            <a href="liste_contacts.html" class="menu-item">
                <i class="fas fa-address-book"></i>
                <span>Liste de contacts gratuit üÜì</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="booster_visibilite.html" class="menu-item">
                <i class="fas fa-rocket"></i>
                <span>Booster ma visibilit√©</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="canva_pro.html" class="menu-item">
                <i class="fas fa-palette"></i>
                <span>Canva Pro</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>

            <a href="connexion_gratuite.html" class="menu-item">
                <i class="fas fa-shield-alt"></i>
                <span>Connexion gratuite</span>
                <span class="menu-badge badge-inactive">‚òê</span>
            </a>
        </aside>

        <main class="content">
            <h1 class="page-title">
                <i class="fas fa-heart"></i>
                <span>LoveEarn</span>
            </h1>

            <div class="card">
                <div class="form-section">
                    <div class="title">Formulaire d'inscription Lover</div>
                    <p>Remplissez ce formulaire pour vous inscrire en tant que membre de la communaut√© LoveEarn et rencontrer de nouvelles personnes !</p>
                    <div class="form-group">
                        <label for="lover-name">Nom de Lover <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <input type="text" id="lover-name" placeholder="Ex: C≈ìur d'Or, Rom√©o, Fleur Bleue" required>
                    </div>
                    <div class="form-group">
                        <label for="qualities">Qualit√©s (d√©crivez-vous en quelques mots)</label>
                        <textarea id="qualities" placeholder="Ex: Gentil, dr√¥le, attentionn√©, cr√©atif..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="age">√Çge <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <input type="number" id="age" placeholder="Votre √¢ge" min="18" required>
                    </div>
                    <div class="form-group">
                        <label for="city">Ville <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <input type="text" id="city" placeholder="Votre ville" required>
                    </div>
                    <div class="form-group">
                        <label for="country">Pays <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <input type="text" id="country" placeholder="Votre pays" required>
                    </div>
                    <div class="form-group">
                        <label for="gender">Sexe <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <select id="gender" required>
                            <option value="">S√©lectionnez...</option>
                            <option value="male">Homme</option>
                            <option value="female">Femme</option>
                            <option value="other">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="height">Taille (cm, optionnel)</label>
                        <input type="number" id="height" placeholder="Ex: 175" min="100">
                    </div>
                    <div class="form-group">
                        <label for="skin-tone">Teint (optionnel)</label>
                        <input type="text" id="skin-tone" placeholder="Ex: Clair, mat, noir">
                    </div>
                    <button class="love-earn-btn" id="submit-lover-btn">
                        <i class="fas fa-user-plus"></i>
                        S'inscrire en tant que Lover
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="form-section">
                    <div class="title">Rechercher votre partenaire id√©al(e)</div>
                    <p>Indiquez vos crit√®res pour trouver le profil qui vous correspond.</p>
                    <div class="form-group">
                        <label for="partner-age">Tranche d'√¢ge du partenaire souhait√©</label>
                        <input type="text" id="partner-age" placeholder="Ex: 25-35 ans">
                    </div>
                    <div class="form-group">
                        <label for="partner-country">Pays du partenaire souhait√©</label>
                        <input type="text" id="partner-country" placeholder="Ex: France, Cameroun">
                    </div>
                    <div class="form-group">
                        <label for="partner-city">Ville du partenaire souhait√©</label>
                        <input type="text" id="partner-city" placeholder="Ex: Douala, Paris">
                    </div>
                    <div class="form-group">
                        <label for="partner-height">Taille du partenaire souhait√© (cm, optionnel)</label>
                        <input type="number" id="partner-height" placeholder="Ex: 165">
                    </div>
                    <div class="form-group">
                        <label for="partner-skin-tone">Teint du partenaire souhait√© (optionnel)</label>
                        <input type="text" id="partner-skin-tone" placeholder="Ex: Mat, clair">
                    </div>
                    <div class="form-group">
                        <label for="partner-gender">Sexe du partenaire recherch√© <i class="fas fa-star-of-life" style="color: red; font-size: 0.7rem;"></i></label>
                        <select id="partner-gender" required>
                            <option value="">S√©lectionnez...</option>
                            <option value="male">Homme</option>
                            <option value="female">Femme</option>
                        </select>
                    </div>
                    <button class="love-earn-btn" id="submit-partner-btn">
                        <i class="fas fa-search"></i>
                        Rechercher un partenaire
                    </button>
                </div>
            </div>

            <div class="card whatsapp-link-section">
                <div class="title">Rejoignez la communaut√© !</div>
                <p>M√™me si nous n'avons pas de correspondance directe pour le moment, notre communaut√© sur WhatsApp est l'endroit id√©al pour rencontrer votre partenaire id√©al(e) et √©changer en direct !</p>
                <a href="https://chat.whatsapp.com/HRgWJFxTgkiEkEC0Ou2028" target="_blank" class="whatsapp-link-btn">
                    <i class="fab fa-whatsapp"></i>
                    Rejoindre le groupe WhatsApp
                </a>
            </div>
        </main>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="https://social-boost-horizon-new-sbh.vercel.app" class="footer-link">Pro Tech Management</a>
                <a href="https://social-boost-horizon-new-sbh.vercel.app" class="footer-link">Site propuls√© par Social Boost Horizon</a>
            </div>
            <div class="footer-text">
                ¬© 2025 MULAFLOWR. Tous droits r√©serv√©s.
            </div>
        </div>
    </footer>

    <script>
        /******** CONFIG FIREBASE ********/
        const firebaseConfig = {
            apiKey: "AIzaSyCjGisjgbFc2ZE0BFgdhlUao8bCCeuKP1k",
            authDomain: "cash-flowr.firebaseapp.com",
            projectId: "cash-flowr",
            storageBucket: "cash-flowr.appspot.com",
            messagingSenderId: "1091928501310",
            appId: "1:1091928501310:web:4f4de306cde36f378ff56f",
            measurementId: "G-5SF6VDLZCB"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        /******** DOM Elements ********/
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const themeToggle = document.getElementById('themeToggle');
        const userProfile = document.getElementById('userProfile');
        const profileDropdown = document.getElementById('profileDropdown');
        const sidebarUsername = document.getElementById('sidebarUsername');
        const userAvatar = document.getElementById('userAvatar');
        const loader = document.getElementById('loader');
        const submitLoverBtn = document.getElementById('submit-lover-btn');
        const submitPartnerBtn = document.getElementById('submit-partner-btn');

        /******** Variables d'√©tat ********/
        let currentUser = null;
        let userData = {};

        /******** UI helpers ********/
        function showNotification(type, title, message, duration = 4000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            const icon = type === 'success' ? 'fa-check-circle' : (type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle');
            notification.innerHTML = `
                <i class="fas ${icon}" style="font-size: 1.5rem;"></i>
                <div>
                    <strong style="display: block; margin-bottom: 5px;">${title}</strong>
                    <span>${message}</span>
                </div>
            `;
            container.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse forwards';
                setTimeout(() => { if (container.contains(notification)) container.removeChild(notification); }, 300);
            }, duration);
        }
        
        // Helper function for user data
        function isPaidFlag(value) {
            if (typeof value === 'boolean') return value;
            if (typeof value === 'string') {
                const v = value.toLowerCase().trim();
                return ['true', 'yes', 'paid', 'pay√©', 'complete', 'completed', '1'].includes(v);
            }
            if (typeof value === 'number') return value === 1;
            return false;
        }
        function isUserPaidFromDoc(docData) {
            if (!docData) return false;
            const candidates = [
                docData.paid, docData.isPaid, docData.paiement, docData.paymentStatus,
                docData.status, docData.statut, docData.payment, docData.paidStatus
            ];
            for (const candidate of candidates) {
                if (candidate !== undefined && candidate !== null) {
                    if (isPaidFlag(candidate)) return true;
                }
            }
            return false;
        }

        /* Menu d√©roulant pour le profil et le mode nuit */
        userProfile.addEventListener('click', (event) => {
            event.stopPropagation();
            profileDropdown.classList.toggle('active');
        });
        document.addEventListener('click', (event) => {
            if (!userProfile.contains(event.target)) {
                profileDropdown.classList.remove('active');
            }
        });

        /* Toggle du th√®me */
        themeToggle.addEventListener('click', (event) => {
            event.stopPropagation();
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            themeToggle.innerHTML = isDarkMode
                ? '<i class="fas fa-sun"></i><span>Mode jour</span>'
                : '<i class="fas fa-moon"></i><span>Mode nuit</span>';
            if(currentUser) saveUserData('theme', isDarkMode ? 'dark' : 'light');
        });

        /* Menu hamburger pour mobile */
        hamburgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            hamburgerBtn.classList.toggle('open');
        });
        overlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            hamburgerBtn.classList.remove('open');
        });

        /******** Fonctions de gestion de donn√©es ********/
        async function saveLoverData(loverData) {
            if (!currentUser) {
                showNotification('error', 'Erreur', "Vous devez √™tre connect√© pour vous inscrire.");
                return;
            }
            try {
                const userLoverRef = db.collection('lovers').doc(currentUser.uid);
                await userLoverRef.set({ ...loverData, userId: currentUser.uid, createdAt: firebase.firestore.FieldValue.serverTimestamp() }, { merge: true });
                showNotification('success', 'Succ√®s', "Votre profil de Lover a √©t√© enregistr√© !");
                return true;
            } catch (error) {
                console.error("Erreur lors de la sauvegarde du profil Lover :", error);
                showNotification('error', 'Erreur', "Impossible de sauvegarder votre profil. R√©essayez plus tard.");
                return false;
            }
        }

        async function savePartnerSearchData(searchData) {
            if (!currentUser) {
                showNotification('error', 'Erreur', "Vous devez √™tre connect√© pour effectuer une recherche.");
                return;
            }
            try {
                const userSearchRef = db.collection('partnerSearches').doc(currentUser.uid);
                await userSearchRef.set({ ...searchData, userId: currentUser.uid, lastSearch: firebase.firestore.FieldValue.serverTimestamp() }, { merge: true });
                showNotification('success', 'Recherche enregistr√©e', "Vos crit√®res de recherche ont √©t√© enregistr√©s !");
                return true;
            } catch (error) {
                console.error("Erreur lors de la sauvegarde de la recherche :", error);
                showNotification('error', 'Erreur', "Impossible de sauvegarder votre recherche. R√©essayez plus tard.");
                return false;
            }
        }

        async function saveUserData(key = null, value = null) {
          if (!currentUser) return;
          try {
            const userRef = db.collection('users').doc(currentUser.uid);
            const dataToSave = key ? { [key]: value } : userData;
            await userRef.set({ ...dataToSave, lastUpdate: new Date() }, { merge: true });
            console.log('Donn√©es utilisateur enregistr√©es avec succ√®s.');
          } catch (error) {
            console.error("Erreur lors de la sauvegarde des donn√©es :", error);
            showNotification('error', 'Erreur de sauvegarde', 'Impossible de sauvegarder vos donn√©es.');
          }
        }
        
        async function loadUserData() {
          if (!currentUser) return;
          const userRef = db.collection('users').doc(currentUser.uid);
          const doc = await userRef.get();
          if (doc.exists) {
              const data = doc.data() || {};
              userData = {
                  ...data,
                  paid: isUserPaidFromDoc(data)
              };
          } else {
            userData = { paid: false };
          }
        }

        /******** Gestion des √©v√©nements des formulaires ********/
        if (submitLoverBtn) {
            submitLoverBtn.addEventListener('click', async () => {
                const loverName = document.getElementById('lover-name').value;
                const qualities = document.getElementById('qualities').value;
                const age = document.getElementById('age').value;
                const city = document.getElementById('city').value;
                const country = document.getElementById('country').value;
                const gender = document.getElementById('gender').value;
                const height = document.getElementById('height').value;
                const skinTone = document.getElementById('skin-tone').value;

                if (!loverName || !age || !city || !country || !gender) {
                    showNotification('error', 'Champs obligatoires', 'Veuillez remplir tous les champs marqu√©s d\'une √©toile.');
                    return;
                }
                
                const loverData = {
                    loverName, qualities, age: Number(age), city, country, gender,
                    height: height ? Number(height) : null,
                    skinTone: skinTone || null
                };

                const success = await saveLoverData(loverData);
                if (success) {
                    // Optionnel: R√©initialiser le formulaire
                    document.getElementById('lover-name').value = '';
                    document.getElementById('qualities').value = '';
                    document.getElementById('age').value = '';
                    document.getElementById('city').value = '';
                    document.getElementById('country').value = '';
                    document.getElementById('gender').value = '';
                    document.getElementById('height').value = '';
                    document.getElementById('skin-tone').value = '';
                }
            });
        }

        if (submitPartnerBtn) {
            submitPartnerBtn.addEventListener('click', async () => {
                const partnerAge = document.getElementById('partner-age').value;
                const partnerCountry = document.getElementById('partner-country').value;
                const partnerCity = document.getElementById('partner-city').value;
                const partnerHeight = document.getElementById('partner-height').value;
                const partnerSkinTone = document.getElementById('partner-skin-tone').value;
                const partnerGender = document.getElementById('partner-gender').value;

                if (!partnerGender) {
                     showNotification('error', 'Champs obligatoires', 'Veuillez s√©lectionner le sexe du partenaire recherch√©.');
                     return;
                }

                const searchData = {
                    partnerAge, partnerCountry, partnerCity, partnerGender,
                    partnerHeight: partnerHeight ? Number(partnerHeight) : null,
                    partnerSkinTone: partnerSkinTone || null
                };

                const success = await savePartnerSearchData(searchData);
                if (success) {
                    // Apr√®s la sauvegarde, proposer de rejoindre le groupe
                    showNotification('info', 'Prochaines √©tapes', 'Vos crit√®res de recherche ont √©t√© pris en compte. Rejoignez notre groupe WhatsApp pour trouver des correspondances !');
                    // On peut rediriger automatiquement ou simplement laisser le bouton de redirection
                    // window.location.href = 'https://chat.whatsapp.com/HRgWJFxTgkiEkEC0Ou2028';
                }
            });
        }
        
        /******** Mise √† jour de l'UI au chargement ********/
        function updateUIOnLoad(user, dbData = {}) {
            const displayName = dbData.displayName || user.displayName || user.email.split('@')[0];
            if (sidebarUsername) sidebarUsername.textContent = displayName;
            if (userAvatar) userAvatar.textContent = displayName.charAt(0).toUpperCase();
        }
        
        function applyTheme() {
            const isDarkMode = userData.theme === 'dark';
            document.body.classList.toggle('dark-mode', isDarkMode);
            themeToggle.innerHTML = isDarkMode 
                ? '<i class="fas fa-sun"></i><span>Mode jour</span>' 
                : '<i class="fas fa-moon"></i><span>Mode nuit</span>';
        }

        /******** Point d'entr√©e principal ********/
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                try {
                    await loadUserData();

                    if (!userData.paid) {
                        showNotification('info', 'Action requise', 'Veuillez finaliser votre inscription pour continuer.');
                        setTimeout(() => { window.location.href = 'paiement.html'; }, 2500);
                        return;
                    }

                    updateUIOnLoad(user, userData);
                    applyTheme();
                    
                    document.body.classList.add('loaded');
                    loader.classList.add('hidden');
                    
                } catch (error) {
                    console.error("Erreur critique lors de l'initialisation :", error);
                    showNotification('error', 'Erreur Critique', "Impossible de charger vos donn√©es. Veuillez vous reconnecter.");
                    auth.signOut();
                    setTimeout(() => { window.location.href = 'login.html'; }, 3000);
                }
            } else {
                window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>
